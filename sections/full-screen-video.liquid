{% for block in section.blocks %}
  {% case block.type %}
    {% when 'video-stored' %}
    <div
      class="stored-video"
      style="width:100%; height:60%"
      {{ block.shopify_attributes }}>
      {{ block.settings.video | media_tag }}
    </div>
    {% when 'external-video' %}
    <div class="external-video" {{ block.shopify_attributes }}>
      {%- if block.settings.video_url.type == 'youtube' -%}
        <iframe
          src="https://www.youtube.com/embed/{{ block.settings.video_url.id }}"
          class="youtube"
          title="{{ block.settings.description | escape }}"
          allow="autoplay; encrypted-media"></iframe>
      {%- else -%}
        <iframe
          src="https://player.vimeo.com/video/{{ block.settings.video_url.id }}"
          class="vimeo"
          title="{{ block.settings.description | escape }}"
          allow="autoplay; encrypted-media"></iframe>
      {%- endif -%}
    </div>
  {% endcase %}
{% endfor %}

{% schema %}
  {
    "name": "Video",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Video section heading",
        "default": "Title"
      }
    ],
    "blocks": [
      {
        "name": "Shopify Hosted Video",
        "type": "video-shopify-hosted",
        "settings": [
          {
            "type": "video",
            "id": "video",
            "label": "A Shopify-hosted video"
          }
        ]
      }, {
        "name": "External Video",
        "type": "external-video",
        "settings": [
          {
            "type": "video_url",
            "id": "video_url",
            "accept": [
              "youtube", "vimeo"
            ],
            "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc",
            "label": "URL",
            "info": "Video plays in the page."
          }
        ]
      }

    ],
    "presets": [
      {
        "name": "Full Screen Video"
      }
    ]
  }
{% endschema %}